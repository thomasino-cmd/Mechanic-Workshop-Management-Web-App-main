generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

enum BlueprintShape {
  compact
  sedan
  wagon
  suv
  van
  sport
}

enum AppointmentStatus {
  Pending
  In_Workshop
}

model Client {
  id          String    @id @default(cuid())
  fullName    String
  phoneNumber String
  vehicles    Vehicle[]
}

model Vehicle {
  id             String           @id @default(cuid())
  clientId       String
  licensePlate   String?          @unique
  make           String
  model          String
  year           Int?
  blueprintShape BlueprintShape?
  color          String?
  client         Client           @relation(fields: [clientId], references: [id])
  jobs           Job[]
  appointments   Appointment[]
}

model Job {
  id         String   @id @default(cuid())
  vehicleId  String
  date       DateTime
  kilometers Int
  tags       Json
  notes      String
  price      Float
  isBilled   Boolean  @default(false)
  vehicle    Vehicle  @relation(fields: [vehicleId], references: [id])
}

model Appointment {
  id             String            @id @default(cuid())
  date           DateTime
  time           String
  vehicleId      String
  jobDescription String
  status         AppointmentStatus @default(Pending)
  vehicle        Vehicle           @relation(fields: [vehicleId], references: [id])
}
